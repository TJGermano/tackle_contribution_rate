# tackle_contribution_rate
# My Data Analysis Project

## Introduction
This repository contains the scripts and analysis for my data analysis project. The goal is to take a differnt look at tackling in the NFL. By leveraging geographical data, we can find out how far each player is from the ball at all points during the game. We can take the distance a defensive player is from the ball carrier at the point of the tackle. We then use different distances to assign credit to the defensive player for contributing to the tackle. To start, we say a defensive player within 1 yard of the ball carrier at the point a tackle was made contributes to a tackle. We also have performed the same analysis for 3 yards away from the ball, and five yards away from the ball. A player will only recieve credit for a single distance on a single play. Meaning if the player is 2 yards away from the ball, they will only recieve credit for 3 yards away from the ball, and not 5 yards. We use the total plays within each distance and the total plays a tackle was made when a player was on the field to get the tackle contribution rate. 

## Data
The raw data used in this project is sourced from Kaggle. Below are the links to the datasets:

- https://www.kaggle.com/competitions/nfl-big-data-bowl-2024/data

## Usage
To use the scripts in this repository, download the datasets from Kaggle and place them in the `data` directory.

## Scripts

### Data Manipulation
- `scripts/calculate_distance.py`: This script reads the raw data from Kaggle, processes it to calculate the distance of each player to the ball carrier for each frame, and outputs the data in a new form suitable for analysis. 

### Player Play Accumulation
- `scripts/accumulate_player_plays.py`: This script aggregates the total number of plays for each player and calculates the number of plays within each distance bucket (1 yard, 3 yards, 5 yards) from the ball carrier during tackle events.

### Player Statistics Calculation
- `scripts/calculate_player_stats.py`: This script merges the tackles and players data, calculates the total tackles, missed tackles, and assists for each player, and merges this with the distance data. It can also export the final dataset to a CSV file.

## Tackle Contribution Analysis
- `tackle_contribution_1_yard/your_script.py`: This script explores using the count of plays within 1 yard of the ball carrier at the point of the tackle to get the tackle contribution. It generates relevant visualization and data table.


## Generated Data

### `output/tackle_distance_data.csv`
This CSV file is generated by the `calculate_player_stats.py` script. It contains the following columns:
- `nflId`: Unique identifier for the player.
- `displayName`: Name of the player.
- `position`: Position of the player.
- `totalTackles`: Total number of tackles by the player.
- `pff_missedTackle`: Number of missed tackles by the player.
- `assists`: Number of assists by the player.
- `within_1_yard`: Number of plays where the player was within 1 yard of the ball carrier.
- `within_3_yards`: Number of plays where the player was within 3 yards of the ball carrier.
- `within_5_yards`: Number of plays where the player was within 5 yards of the ball carrier.
- `totalPlays`: Total number of plays for the player.

## 1/3/5 Yard Analysis

### `tackle_contribution_[n]_yard/analyze_tackle_contribution_[n]_yard.py`
This script performs an in-depth analysis of tackle contributions within 1,3 or 5 yards. It processes the `tackle_distance_data.csv` file to generate insights and visualizations regarding players' performance. To get the tackle contributution rate, the scripot uses the Pythagorean expectation formula where tackle contribution rate equals total plays within 1(or 3 or 5) yard/total plays within 1(or 3 or 5) yard plus total plays 

### `tackle_contribution_[n]_yard/top_25_[n]_yard_TCR.png`
This visual representation helps in understanding the tackle contribution of players based on their proximity to the ball carrier within 1 yard.

### `tackle_contribution_[n]_yard/all_players_[n]_yard_tackle_contribution.csv`
This CSV file contains the processed data used for generating the visualizations.

## Usage

### Steps to Use the Tackle Contribution Analysis Script:

1. **Download the Script**:
   - Download the `analyze_tackle_contribution_1_yard.py script from the `tackle_contribution_1_yard` folder.

2. **Ensure Data Availability**:
   - Ensure you have the `tackle_distance_data.csv` file from the `output` directory.

3. **Run the Script**:
   - Open a terminal or command prompt.
   - Navigate to the directory where the script and the `tackle_distance_data.csv` file are located.
   - Run the script using the following command:

     ```sh
     python tackle_contribution_1_yard/your_script.py
     ```

   - The script will process the data and generate the visualization.

## Usage

### Steps to Use the Data Manipulation Script:

1. **Download the Script**:
   - Download the `calculate_distance.py` script from this repository.

2. **Download the Data**:
   - Download the raw datasets from Kaggle using the links provided in the [Data](#data) section.
   - Place the downloaded CSV files in a folder named `data`.

3. **Run the Script**:
   - Make sure you have Python installed on your machine.
   - Open a terminal or command prompt.
   - Navigate to the directory where the script and the data folder are located.
   - Run the script using the following command:

     ```sh
     python scripts/calculate_distance.py
     ```

   - The script will process the data and generate a new CSV file with the distances calculated.

### Steps to Use the Player Play Accumulation Script:

1. **Download the Script**:
   - Download the `accumulate_player_plays.py` script from this repository.

2. **Ensure Data Availability**:
   - Ensure you have run the `calculate_distance.py` script for each week of data and have the resulting `week_X_distance.csv` files.

3. **Run the Script**:
   - Open a terminal or command prompt.
   - Navigate to the directory where the script and the data files are located.
   - Run the script using the following command:

     ```sh
     python scripts/accumulate_player_plays.py
     ```

   - The script will process the data and print the results for defensive players sorted by plays within 1 yard.

### Steps to Use the Player Statistics Calculation Script:

1. **Download the Script**:
   - Download the `calculate_player_stats.py` script from this repository.

2. **Ensure Data Availability**:
   - Ensure you have the `tackles.csv`, `players.csv`, and the results from `accumulate_player_plays.py`.

3. **Run the Script**:
   - Open a terminal or command prompt.
   - Navigate to the directory where the script and the data files are located.
   - Run the script using the following command:

     ```sh
     python scripts/calculate_player_stats.py
     ```

   - The script will process the data, calculate the player stats, and print the results. You can uncomment the line to save the final dataset to a CSV file if needed.

### Note:
- Ensure you have all the necessary Python libraries installed. You can install them using:

    ```sh
    pip install pandas numpy
    ```

## License
This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.
